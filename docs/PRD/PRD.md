# **VidFetch 产品需求文档 (PRD)**

| 版本号 | 日期 | 修改人 | 说明 |
| :---- | :---- | :---- | :---- |
| v1.0 | 2025-11-21 | AI Product Manager | 初始版本创建 |

## **1\. 项目概述 (Overview)**

### **1.1 产品背景**

yt-dlp 是目前最强大的开源命令行视频下载工具，支持数千个视频网站（包括 YouTube, Bilibili, Twitch 等）。然而，其基于命令行的操作方式劝退了大量普通用户。**VidFetch** 旨在为 yt-dlp 提供一个美观、直观且功能丰富的图形用户界面 (GUI)，降低使用门槛，让每个人都能轻松保存互联网上的视频内容。

### **1.2 产品目标**

* **易用性**：提供“复制-粘贴-下载”的一键式体验。  
* **功能性**：完整保留 yt-dlp 的核心能力（多格式、多分辨率、字幕、元数据）。  
* **跨平台**：支持 Windows 和 macOS（未来支持 Linux）。  
* **稳定性**：内置自动更新 yt-dlp 内核的机制，确保解析规则不过时。

### **1.3 目标用户**

* **内容创作者**：需要下载素材进行二次创作。  
* **普通观众**：希望本地收藏喜欢的视频、音乐或课程以离线观看。  
* **归档爱好者**：需要批量下载整个播放列表或频道进行备份。

## **2\. 用户流程 (User Flow)**

1. **获取链接**：用户在浏览器复制视频 URL。  
2. **解析**：VidFetch 自动读取剪贴板或用户手动粘贴，点击“解析”。  
3. **选择**：展示视频缩略图、标题，用户选择画质（如 4K/1080P）和格式（MP4/MKV/MP3）。  
4. **下载**：用户点击“开始下载”，进入任务队列。  
5. **完成**：下载完成，通知用户，支持一键打开文件所在位置。

## **3\. 功能需求 (Functional Requirements)**

### **3.1 核心下载功能 (P0 \- Must Have)**

| ID | 功能名称 | 详细描述 | 优先级 |
| :---- | :---- | :---- | :---- |
| F-01 | **链接解析** | 支持单个视频 URL 的解析，提取标题、时长、缩略图、可用分辨率列表。 | P0 |
| F-02 | **格式选择** | 提供视频流与音频流的合并选项。默认推荐 最佳视频+最佳音频 (合并为 MP4/MKV)。单独提取音频 (MP3/M4A)。 | P0 |
| F-03 | **画质选择** | 下拉菜单选择分辨率：8K, 4K, 2K, 1080p, 720p 等。 | P0 |
| F-04 | **任务管理** | 支持 暂停、继续、取消 下载任务。实时显示下载速度、剩余时间、进度百分比。 | P0 |
| F-05 | **批量下载** | 支持解析播放列表 (Playlist) 或频道 URL，允许用户勾选列表中的部分或全部视频进行下载。 | P1 |

### **3.2 高级配置功能 (P1 \- Should Have)**

| ID | 功能名称 | 详细描述 | 优先级 |
| :---- | :---- | :---- | :---- |
| F-06 | **字幕下载** | 自动检测可用字幕，支持自动嵌入视频或下载为独立的 .srt/.vtt 文件。 | P1 |
| F-07 | **元数据嵌入** | 将封面、标题、作者、发布时间等信息写入视频文件元数据。 | P1 |
| F-08 | **Cookies支持** | 允许导入 cookies.txt 或从浏览器获取 Cookies，以支持下载会员专享或需登录才能观看的内容（如 Bilibili 1080p+）。 | P1 |
| F-09 | **代理设置** | 支持 HTTP/SOCKS5 代理设置，解决部分地区网络限制问题。 | P1 |
| F-10 | **文件名模版** | 允许用户自定义输出文件名格式（例如：{Title} \- {Channel} \- {Date}.mp4）。 | P2 |

### **3.3 系统与维护 (P2 \- Nice to Have)**

| ID | 功能名称 | 详细描述 | 优先级 |
| :---- | :---- | :---- | :---- |
| F-11 | **内核更新** | 每次启动时检查 yt-dlp 二进制文件版本，并在后台自动更新，确保解析算法最新。 | P0 |
| F-12 | **FFmpeg检测** | 首次启动检测系统是否安装 FFmpeg，若未安装，提供引导或自动下载便携版。 | P0 |
| F-13 | **深色模式** | UI 支持跟随系统自动切换深色/浅色主题。 | P2 |
| F-14 | **剪贴板监听** | (可选开关) 自动监测剪贴板中的视频链接并弹出下载提示。 | P2 |

## **4\. 非功能需求 (Non-functional Requirements)**

* **性能**：GUI 响应延迟低于 100ms；即使在处理包含 100+ 视频的播放列表时，界面也不应卡死。  
* **兼容性**：  
  * Windows 10/11 (x64)  
  * macOS 11.0+ (Intel/Apple Silicon)  
* **安全性**：  
  * 不收集用户下载记录。  
  * Cookies 文件仅存储在本地，不上传服务器。

## **5\. UI/UX 设计概览**

### **5.1 主界面 (Dashboard)**

* **顶部栏**：  
  * 大的输入框 (Placeholder: "在此粘贴视频链接...")。  
  * “解析”按钮 (主操作)。  
  * “设置”图标。  
* **中间区域 (任务列表)**：  
  * 解析成功后，显示视频卡片：左侧缩略图，中间标题/作者，右侧格式选择下拉框 \+ “下载”按钮。  
  * 正在下载的任务：显示进度条、实时速度 (e.g., 5.2 MB/s)、剩余大小。  
* **底部栏**：  
  * 全局下载路径显示/修改。  
  * 一键“全部开始/全部暂停”。

### **5.2 设置界面**

* **网络**：代理服务器地址及端口。  
* **下载**：默认下载路径、最大并发下载数。  
* **格式**：默认首选分辨率 (e.g., 总是首选 1080p)、默认输出容器 (MP4/MKV)。  
* **高级**：Cookies 文件路径、自定义 yt-dlp 命令行参数 (供极客用户使用)。

## **6\. 技术栈建议 (Technical Stack)**

为了实现跨平台且保持原生性能，建议采用以下技术栈：

* **GUI 框架**:  
  * *方案 A (推荐)*: **Electron \+ React/Vue**。界面最美观，前端开发效率高，社区资源丰富。  
  * *方案 B (轻量)*: **Flutter**。性能更好，打包体积比 Electron 小。  
  * *方案 C (Python 原生)*: **PyQt6** 或 **Tkinter**。直接与 Python 后端集成，但在 UI 美观度上较难打磨。  
* **后端逻辑**: **Node.js** (若选 Electron) 或 **Python**。  
  * 核心逻辑是作为 Wrapper 调用 yt-dlp 的二进制文件。  
* **核心依赖**:  
  * yt-dlp (可执行文件)  
  * ffmpeg (用于合并视频流和音频流，以及格式转换)

## **7\. 风险与对策**

| 风险 | 可能性 | 影响 | 对策 |
| :---- | :---- | :---- | :---- |
| 网站反爬机制升级，导致下载失败 | 高 | 高 | 建立快速反馈机制，并在软件内提供“更新内核”按钮，依赖 yt-dlp 社区的更新。 |
| FFmpeg 配置困难 | 中 | 高 | 将静态编译好的 FFmpeg 随软件打包，或在首次启动时自动下载。 |
| 法律/版权风险 | 低 | 中 | 在软件显眼位置添加免责声明，提示用户仅下载拥有版权或允许下载的内容。 |

## **8\. 开发路线图 (Roadmap)**

* **Phase 1 (MVP)**: 实现单链接解析、MP4 格式下载、进度条显示、Windows 端打包。  
* **Phase 2**: 增加播放列表解析、Cookies 导入、macOS 适配。  
* **Phase 3**: UI 美化、深色模式、下载历史记录、自定义文件名模版。